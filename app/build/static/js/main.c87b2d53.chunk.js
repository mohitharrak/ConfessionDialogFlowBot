(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(18),o=n.n(i),r=(n(99),n(82)),c=n(29),l=(n(100),n(65),n(4)),m=n(8),u=n(10),d=n(7),h=n(9),g=(n(101),n(26)),f={Incoming:0,Outgoing:1},p=n(171),b=n(177),v=n(166),y=n(181),E=n(167),O=n(176),j=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"_renderMessage",value:function(){}},{key:"_buttonClick",value:function(e){e.event?this.props.onTriggerEvent&&this.props.onTriggerEvent(e):this.props.onSendMessage&&this.props.onSendMessage(e.payload)}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"ms-Grid-col ms-sm12"},this.props.message.direction==f.Incoming?a.createElement(p.a,{style:{backgroundColor:"#f4f7f9",float:"left",width:"100%",margin:10}},a.createElement(b.a,null,a.createElement(v.a,{activity:"0 minutes ago",people:[{name:this.props.message.member.username,profileImageSrc:""}]}),a.createElement(y.a,{className:"message-box-text",title:this.props.message.text,showAsSecondaryTitle:!0}),this.props.message.buttons&&this.props.message.buttons.length>0&&a.createElement(E.a,{gap:10,padding:10},this.props.message.buttons.map(function(t){return a.createElement(O.a,{onClick:e._buttonClick.bind(e,t),text:t.title})})),a.createElement("div",null))):a.createElement(p.a,{style:{backgroundColor:"#f4f9f8",float:"right",width:"100%",margin:10}},a.createElement(b.a,null,a.createElement(v.a,{activity:"10 minutes ago",people:[{name:"Me",profileImageSrc:""}]}),a.createElement(y.a,{title:this.props.message.text,showAsSecondaryTitle:!0}))))}}]),t}(a.Component),k=function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"_renderMessage",value:function(e){return a.createElement(j,{onSendMessage:this.props.onSendMessage,onTriggerEvent:this.props.onTriggerEvent,message:e})}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"ms-Grid-row"},this.props.messages.map(function(t){return e._renderMessage(t)}))}}]),t}(a.Component),S=n(170),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={text:""},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onChange",value:function(e){this.setState({text:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({text:""}),this.props.onSendMessage(this.state.text)}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"ms-Grid-row"},a.createElement("div",{className:"ms-Grid-col ms-sm12"},a.createElement("div",{style:{float:"left",width:"calc(100% - 80px)"}},a.createElement(S.a,{autoFocus:!0,onChange:function(t){return e.onChange(t)},value:this.state.text,type:"multiline",placeholder:"Enter your message and click Send"})),a.createElement(O.a,{onClick:this.onSubmit.bind(this),text:"Send"})))}}]),t}(a.Component),w=new(n(85).a)({accessToken:"ba8b1e5dad804cbfbd1bd9d1fcc08991"}),_=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).scrollToBottom=function(){window.scrollTo(0,document.body.scrollHeight)},n._decodeMessage=function(e){var t={};try{var n=e.replace(/#\(/g,"{").replace(/\)#/g,"}");t=JSON.parse(n)}catch(a){t={text:e}}return t},n.SendMessage=function(e){n._showMessage({text:e,member:n.state.member,direction:f.Outgoing}),w.textRequest(e).then(n._handleQueryResponse.bind(Object(g.a)(Object(g.a)(n)))).catch(function(e){console.log(e)})},n.TriggerEvent=function(e){n._showMessage({text:e.payload,member:n.state.member,direction:f.Outgoing}),w.eventRequest(e.event,{}).then(n._handleQueryResponse.bind(Object(g.a)(Object(g.a)(n)))).catch(function(e){console.log(e)})},w.eventRequest("Welcome").then(n._handleQueryResponse.bind(Object(g.a)(Object(g.a)(n)))).catch(function(e){alert("error"),console.log(e)}),n.state={messages:[],member:{username:"Me"}},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}}]),Object(m.a)(t,[{key:"_showMessage",value:function(e){var t=this.state.messages;t.push(e),this.setState({messages:t})}},{key:"_handleQueryResponse",value:function(e){var t=this;e.result&&e.result.fulfillment&&e.result.fulfillment.messages&&e.result.fulfillment.messages.forEach(function(e){if(4==e.type)console.log(e),(n=e.payload).member={username:"Confession Bot"},n.direction=f.Incoming,t._showMessage(n);else if(0==e.type){var n;console.log(e),(n=t._decodeMessage(e.speech)).member={username:"Confession Bot"},n.direction=f.Incoming,t._showMessage(n)}})}},{key:"render",value:function(){return a.createElement("div",null,a.createElement(k,{onSendMessage:this.SendMessage.bind(this),onTriggerEvent:this.TriggerEvent.bind(this),messages:this.state.messages}),a.createElement(x,{onSendMessage:this.SendMessage}))}}]),t}(a.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"ms-Grid-row",style:{margin:"0px",marginBottom:"10px"}},s.a.createElement("div",{className:"ms-Grid-col ms-sm12"},s.a.createElement(_,null))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=n(81),I=n.n(M),N=function(){function e(){Object(l.a)(this,e),this.baseUrl="",this._axiosRequestConfig=void 0,this._axiosRequestConfig={headers:{"Content-Type":"application/json"}},this.baseUrl="https://281ac53c.ngrok.io"}return Object(m.a)(e,[{key:"listAll",value:function(){var e=this;return new Promise(function(t,n){I.a.get(e.baseUrl+"/history",e._axiosRequestConfig).then(function(e){t(e.data)},function(e){n(e)})})}}]),e}(),R=n(164),T=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e)))._historyService=new N,n.state={history:[],columns:n._getColumns()},n._getHistory(),n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"_getColumns",value:function(){return[{key:"Date",name:"Date",fieldName:"Date",isSorted:!0,minWidth:130,maxWidth:130},{key:"SessionId",name:"Session Id",fieldName:"SessionId",minWidth:240,maxWidth:240,onRender:function(e){var t=e.SessionId.substring(e.SessionId.lastIndexOf("/")+1);return a.createElement("span",null,t)}},{key:"Intent",name:"Intent",fieldName:"IntentName",isSorted:!0,minWidth:130,maxWidth:130},{key:"Query",name:"Query",fieldName:"Query",minWidth:130,maxWidth:130},{key:"Is Failed",name:"Is Failed",fieldName:"Failed",minWidth:50,maxWidth:50,onRender:function(e){return a.createElement("span",null,e.Failed.toString())}},{key:"Response",name:"Response",fieldName:"Response",minWidth:0,maxWidth:80,onRender:function(e){return a.createElement("span",null,JSON.stringify(e.Response))}}]}},{key:"_getHistory",value:function(){var e=this;this._historyService.listAll().then(function(t){console.log(t),e.setState({history:t})},function(e){console.log(e),alert(e)})}},{key:"render",value:function(){return a.createElement("div",null,a.createElement(R.a,{items:this.state.history,columns:this.state.columns}))}}]),t}(a.Component),W=n(165),B=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"ms-Grid-row",style:{margin:"0px",marginBottom:"10px"}},s.a.createElement("div",{className:"ms-Grid-col ms-sm12"},s.a.createElement(W.a,{items:[{text:"History",key:"History"}]}),s.a.createElement(T,null))))}}]),t}(a.Component),G=s.a.createElement(r.a,null,s.a.createElement("div",null,s.a.createElement(c.a,{path:"/",exact:!0,component:C}),s.a.createElement(c.a,{path:"/history",component:B})));o.a.render(G,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,t,n){},94:function(e,t,n){e.exports=n(128)},99:function(e,t,n){}},[[94,1,2]]]);
//# sourceMappingURL=main.c87b2d53.chunk.js.map